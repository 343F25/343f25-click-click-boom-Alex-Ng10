<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Click, Click, BOOM ðŸ’¥</title>
  <link rel="icon" href="https://fav.farm/ðŸ’£">
  <style>
    table {
      background-color: #450084;
      min-width: 25rem;
      min-height: 25rem;
    }

    td {
      background-color: wheat;
      border: 0.25rem solid #8EE4D7;
    }

    .odd td {
      background-color: #333333;
    }
  </style>
</head>

<body>
  <table>
    <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <!-- Click3.wav by EdgardEdition -- https://freesound.org/s/113093/ -- License: Attribution 3.0 -->
  <audio id="click" src="113093__edgardedition__click3.wav"></audio>

  <!-- Boom_C_02 by cabled_mess -- https://freesound.org/s/350975/ -- License: Creative Commons 0 -->
  <audio id="boom" src="350975__cabled_mess__boom_c_02.wav"></audio>
  <script>
    let clickCount = 0;
    const clickSound = document.getElementById('click')
    const boomSound = document.getElementById('boom')
    let lastSound = clickSound;

    // TODO: 1 - make it such that if any table cell is clicked, the onClick function below is executed

    const table = document.querySelector('table');
    if (table) {
      table.addEventListener('click', function (ev) {
        const td = ev.target.closest('td');
        if (!td) return;
        onClick(ev, td);
      });
    }
    // Update Click Click BOOM so that
    // 1. even and odd
    //     1. the class "odd" is added to rows that have an odd number of cells
    //     2. the class doesn't remain on the rows when they have an even number of cells
    // 2. BOOM TEXT
    //     1. add an h1 at the top that has no content
    //     2. each time the BOOM happens, change the content of the h1 to either "BOOM" or empty string (alternating)
    function onClick(ev, tdArg) {
      lastSound.pause()
      lastSound.currentTime = 0;
      clickCount++
      if (clickCount % 3 == 0) {
        // boom
        boomSound.play();
        lastSound = boomSound
      } else {
        clickSound.play();
        lastSound = clickSound
      }

      console.log('ev in onClick', ev)
      // TODO: 2 - REMOVE THE TABLE CELL THAT WAS CLICKED
      // Remove the table cell that was clicked
      const td = tdArg || (ev.target.closest && ev.target.closest('td'));
      if (td) td.remove();

    }
  </script>
</body>

</html>